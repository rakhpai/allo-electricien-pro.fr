<!-- NAVBAR VARIANT 3: MEGA MENU POWER -->
<!-- Strategy: Comprehensive navigation with rich previews, SEO-friendly internal linking -->
<!-- Best for: Service discovery, desktop users, SEO link building -->

<nav class="navbar-v3 bg-white shadow-lg sticky top-0 z-50">
  <div class="container mx-auto px-4">
    <!-- Main Navigation Bar (Large) -->
    <div class="flex justify-between items-center h-20">
      <!-- Logo + Tagline -->
      <div class="flex items-center gap-3">
        <a href="/" class="flex items-center" aria-label="Allo √âlectricien">
          <img src="/images/logo_1b.svg" alt="{{ .Site.Params.companyName }}" class="h-16 w-auto">
        </a>
        <div class="hidden xl:block text-sm text-gray-600 border-l pl-3 border-gray-300">
          <div class="font-bold text-primary">410 √âlectriciens</div>
          <div class="text-xs">√éle-de-France & Oise</div>
        </div>
      </div>

      <!-- Desktop Mega Menu Navigation -->
      <div class="hidden lg:flex items-center space-x-4">
        <!-- Services Mega Menu -->
        <div class="mega-menu-trigger relative">
          <button class="nav-button flex items-center gap-1 text-gray-700 hover:text-primary font-semibold px-4 py-2 rounded-lg hover:bg-gray-50 transition">
            Services
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
          </button>

          <!-- Services Mega Menu Dropdown -->
          <div class="mega-menu absolute top-full left-0 mt-2 w-96 bg-white rounded-xl shadow-2xl border border-gray-100 hidden opacity-0">
            <div class="p-6">
              <h3 class="text-lg font-bold text-gray-900 mb-4">Nos Services</h3>
              <div class="space-y-3">
                <!-- Service 1 -->
                <a href="/#services" class="mega-menu-item block p-4 rounded-lg hover:bg-blue-50 transition group">
                  <div class="flex items-start gap-3">
                    <div class="text-3xl">‚ö°</div>
                    <div class="flex-1">
                      <div class="font-bold text-gray-900 group-hover:text-primary">D√©pannage Urgent</div>
                      <div class="text-sm text-gray-600 mt-1">Intervention 24/7 pour pannes √©lectriques</div>
                      <div class="text-xs text-primary mt-2 font-medium">&lt;30 min ‚Ä¢ 24/7</div>
                    </div>
                  </div>
                </a>

                <!-- Service 2 -->
                <a href="/#services" class="mega-menu-item block p-4 rounded-lg hover:bg-blue-50 transition group">
                  <div class="flex items-start gap-3">
                    <div class="text-3xl">üîß</div>
                    <div class="flex-1">
                      <div class="font-bold text-gray-900 group-hover:text-primary">Installation</div>
                      <div class="text-sm text-gray-600 mt-1">Prises, luminaires, tableaux √©lectriques</div>
                      <div class="text-xs text-primary mt-2 font-medium">Devis gratuit</div>
                    </div>
                  </div>
                </a>

                <!-- Service 3 -->
                <a href="/#services" class="mega-menu-item block p-4 rounded-lg hover:bg-blue-50 transition group">
                  <div class="flex items-start gap-3">
                    <div class="text-3xl">‚úì</div>
                    <div class="flex-1">
                      <div class="font-bold text-gray-900 group-hover:text-primary">Mise aux Normes</div>
                      <div class="text-sm text-gray-600 mt-1">Conformit√© NF C 15-100, diagnostic</div>
                      <div class="text-xs text-primary mt-2 font-medium">Certifi√©</div>
                    </div>
                  </div>
                </a>
              </div>
            </div>
          </div>
        </div>

        <!-- Annuaire/Directory Link -->
        <a href="/#directory" class="nav-button text-gray-700 hover:text-primary font-semibold px-4 py-2 rounded-lg hover:bg-gray-50 transition">
          Annuaire
        </a>

        <!-- Videos Link -->
        <a href="/#videos" class="nav-button text-gray-700 hover:text-primary font-semibold px-4 py-2 rounded-lg hover:bg-gray-50 transition">
          Vid√©os
        </a>

        <!-- Zones Link -->
        <a href="/#coverage" class="nav-button text-gray-700 hover:text-primary font-semibold px-4 py-2 rounded-lg hover:bg-gray-50 transition">
          Zones
        </a>

        <!-- Dual CTAs -->
        <a href="/#directory" class="btn-secondary bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-2 px-5 rounded-lg transition border border-gray-300">
          Trouver
        </a>

        <a href="tel:{{ .Site.Params.mainPhoneRaw }}" class="btn-primary bg-emergency hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg transition flex items-center gap-2 shadow-lg">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
          </svg>
          <span class="hidden xl:inline">{{ .Site.Params.mainPhone }}</span>
          <span class="xl:hidden">Appeler</span>
        </a>
      </div>

      <!-- Mobile Menu Button -->
      <div class="lg:hidden">
        <button id="mobile-menu-button-v3" class="text-gray-700 hover:text-primary p-2" aria-label="Menu">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Full-Width Trust Bar -->
  <div class="trust-bar bg-gradient-to-r from-blue-50 to-green-50 border-t border-gray-100">
    <div class="container mx-auto px-4 py-3">
      <div class="flex items-center justify-center flex-wrap gap-6 text-sm">
        <div class="flex items-center gap-2">
          <img src="/eleclogos/certifie_icon.svg" alt="" class="h-6 w-auto">
          <span class="font-semibold text-gray-700">Certifi√©s NF C 15-100</span>
        </div>
        <div class="hidden md:block w-px h-6 bg-gray-300"></div>
        <div class="flex items-center gap-2">
          <img src="/eleclogos/247_icon.svg" alt="" class="h-6 w-auto">
          <span class="font-semibold text-gray-700">Disponible 24/7</span>
        </div>
        <div class="hidden md:block w-px h-6 bg-gray-300"></div>
        <div class="flex items-center gap-2 text-emergency">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
          </svg>
          <span class="font-bold">Intervention &lt;30min</span>
        </div>
      </div>
    </div>
  </div>
</nav>

<!-- Mobile Menu (Simple Slide) -->
<div id="mobile-menu-v3" class="mobile-menu-v3 fixed inset-0 bg-white z-50 transform translate-x-full transition-transform duration-300 lg:hidden overflow-y-auto">
  <div class="p-4">
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-xl font-bold text-gray-900">Menu</h2>
      <button id="mobile-menu-close-v3" class="text-gray-500 p-2" aria-label="Fermer">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>

    <!-- Mobile CTAs -->
    <div class="grid grid-cols-2 gap-3 mb-6">
      <a href="tel:{{ .Site.Params.mainPhoneRaw }}" class="bg-emergency text-white font-bold py-4 px-4 rounded-lg text-center shadow-lg">
        üìû Urgence
      </a>
      <a href="/#directory" class="bg-primary text-white font-bold py-4 px-4 rounded-lg text-center shadow-lg">
        üîç Trouver
      </a>
    </div>

    <!-- Mobile Nav Links -->
    <div class="space-y-2">
      <a href="/#services" class="block p-4 bg-gray-50 rounded-lg font-semibold text-gray-900 hover:bg-gray-100">üîß Services</a>
      <a href="/#directory" class="block p-4 bg-gray-50 rounded-lg font-semibold text-gray-900 hover:bg-gray-100">üìç Annuaire</a>
      <a href="/#videos" class="block p-4 bg-gray-50 rounded-lg font-semibold text-gray-900 hover:bg-gray-100">üé• Vid√©os</a>
      <a href="/#coverage" class="block p-4 bg-gray-50 rounded-lg font-semibold text-gray-900 hover:bg-gray-100">üó∫Ô∏è Zones</a>
    </div>

    <!-- Trust Info -->
    <div class="mt-6 p-4 bg-blue-50 rounded-lg text-center">
      <div class="flex justify-center gap-3 mb-2">
        <img src="/eleclogos/certifie_icon.svg" alt="Certifi√©" class="h-8">
        <img src="/eleclogos/247_icon.svg" alt="24/7" class="h-8">
      </div>
      <p class="text-sm font-semibold text-gray-700">410 √âlectriciens ‚Ä¢ 24/7 ‚Ä¢ &lt;30min</p>
    </div>
  </div>
</div>

<style>
  /* Mega Menu Hover Behavior */
  .mega-menu-trigger:hover .mega-menu {
    display: block;
    animation: megaMenuSlide 0.3s ease-out forwards;
  }

  @keyframes megaMenuSlide {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Nav Button Hover */
  .nav-button {
    position: relative;
  }

  .nav-button::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%) scaleX(0);
    width: 80%;
    height: 2px;
    background: #0066FF;
    transition: transform 0.3s ease;
  }

  .nav-button:hover::before {
    transform: translateX(-50%) scaleX(1);
  }

  /* Mobile Menu Active */
  .mobile-menu-v3.active {
    transform: translateX(0);
  }

  /* Trust Bar Animation */
  .trust-bar {
    animation: slideDown 0.5s ease-out;
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-100%);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>

<script>
  (function() {
    const menuButton = document.getElementById('mobile-menu-button-v3');
    const mobileMenu = document.getElementById('mobile-menu-v3');
    const menuClose = document.getElementById('mobile-menu-close-v3');

    function openMobileMenuV3() {
      mobileMenu?.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeMobileMenuV3() {
      mobileMenu?.classList.remove('active');
      document.body.style.overflow = '';
    }

    menuButton?.addEventListener('click', openMobileMenuV3);
    menuClose?.addEventListener('click', closeMobileMenuV3);

    // Close on link click
    mobileMenu?.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => setTimeout(closeMobileMenuV3, 200));
    });
  })();
</script>
