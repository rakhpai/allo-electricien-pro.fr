{{- /* FAQ Item - Individual collapsible FAQ question/answer */ -}}
{{- /* Requires Alpine.js and must be nested within faq-accordion shortcode */ -}}
{{- $question := .Get "question" -}}
{{- /* Generate unique ID based on question hash */ -}}
{{- $id := $question | md5 -}}

<div class="bg-white rounded-lg shadow-md overflow-hidden border border-gray-100">
  <!-- Question button -->
  <button
    @click="openFaq = (openFaq === '{{ $id }}' ? null : '{{ $id }}')"
    class="w-full flex items-center justify-between p-6 text-left hover:bg-gray-50 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset"
    :aria-expanded="openFaq === '{{ $id }}'"
    aria-controls="faq-content-{{ $id }}"
  >
    <h3 class="text-lg font-semibold text-gray-900 pr-4 flex-1">
      {{ $question }}
    </h3>

    <!-- Chevron icon -->
    <svg
      class="w-6 h-6 text-blue-600 transform transition-transform duration-200 flex-shrink-0"
      :class="{ 'rotate-180': openFaq === '{{ $id }}' }"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
    >
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
    </svg>
  </button>

  <!-- Answer content -->
  <div
    id="faq-content-{{ $id }}"
    x-show="openFaq === '{{ $id }}'"
    x-transition:enter="transition ease-out duration-200"
    x-transition:enter-start="opacity-0 transform -translate-y-2"
    x-transition:enter-end="opacity-100 transform translate-y-0"
    x-transition:leave="transition ease-in duration-150"
    x-transition:leave-start="opacity-100 transform translate-y-0"
    x-transition:leave-end="opacity-0 transform -translate-y-2"
    class="px-6 pb-6"
    style="display: none;"
    role="region"
    :aria-hidden="openFaq !== '{{ $id }}'"
  >
    <div class="prose prose-sm max-w-none text-gray-700 border-t border-gray-100 pt-4">
      {{ .Inner | markdownify }}
    </div>
  </div>
</div>
