{{- /* FAQ Item - Enhanced collapsible FAQ with smooth animations */ -}}
{{- /* Requires Alpine.js and must be nested within faq-accordion shortcode */ -}}
{{- $question := .Get "question" -}}
{{- /* Generate unique ID based on question hash */ -}}
{{- $id := $question | md5 -}}

<div class="faq-item">
  <!-- Question button -->
  <button
    @click="openFaq = (openFaq === '{{ $id }}' ? null : '{{ $id }}')"
    class="faq-question"
    :aria-expanded="openFaq === '{{ $id }}'"
    aria-controls="faq-content-{{ $id }}"
  >
    <span>{{ $question }}</span>

    <!-- Chevron icon -->
    <svg
      class="faq-icon"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
      aria-hidden="true"
    >
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
    </svg>
  </button>

  <!-- Answer content -->
  <div
    id="faq-content-{{ $id }}"
    x-show="openFaq === '{{ $id }}'"
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0 transform -translate-y-2"
    x-transition:enter-end="opacity-100 transform translate-y-0"
    x-transition:leave="transition ease-in duration-200"
    x-transition:leave-start="opacity-100 transform translate-y-0"
    x-transition:leave-end="opacity-0 transform -translate-y-2"
    class="faq-answer"
    style="display: none;"
    role="region"
    :aria-hidden="openFaq !== '{{ $id }}'"
  >
    {{ .Inner | markdownify }}
  </div>
</div>
